@model ControleDeContatos.Models.OrdemServicoModel

@{
    ViewData["Title"] = $"Visualizar OS - {Model.NumeroOS}";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-clipboard-list me-2"></i>
                        Ordem de Serviço - @Model.NumeroOS
                    </h5>
                    <div>
                        <a href="/OrdemServico/Editar/@Model.Id" class="btn btn-light btn-sm">
                            <i class="fas fa-edit me-1"></i> Editar
                        </a>
                        <a href="/Home" class="btn btn-light btn-sm">
                            <i class="fas fa-arrow-left me-1"></i> Voltar
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- Informações Principais -->
                        <div class="col-md-8">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h6 class="text-muted mb-2">Status</h6>
                                    <span class="badge bg-@(Model.Status == "Aberta" ? "warning" : Model.Status == "Em Andamento" ? "info" : Model.Status == "Finalizada" ? "success" : "danger") fs-6">
                                        @Model.Status
                                    </span>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-muted mb-2">Valor Total</h6>
                                    <h4 class="text-primary mb-0">R$ @Model.Valor.ToString("N2")</h4>
                                </div>
                            </div>

                            <div class="row mb-4">
                                <div class="col-12">
                                    <h6 class="text-muted mb-2">Descrição do Serviço</h6>
                                    <div class="border rounded p-3 bg-light">
                                        @Model.Descricao
                                    </div>
                                </div>
                            </div>

                            @if (!string.IsNullOrEmpty(Model.Observacoes))
                            {
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <h6 class="text-muted mb-2">Observações</h6>
                                        <div class="border rounded p-3 bg-light">
                                            @Model.Observacoes
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Informações Laterais -->
                        <div class="col-md-4">
                            <!-- Cliente -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0"><i class="fas fa-user me-2"></i>Cliente</h6>
                                </div>
                                <div class="card-body">
                                    <h6>@Model.Cliente?.Nome</h6>
                                    <p class="text-muted mb-1">@Model.Cliente?.Telefone</p>
                                    <p class="text-muted mb-0">@Model.Cliente?.Email</p>
                                </div>
                            </div>

                            <!-- Veículo -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0"><i class="fas fa-car me-2"></i>Veículo</h6>
                                </div>
                                <div class="card-body">
                                    <h6>@Model.Veiculo?.Placa</h6>
                                    <p class="text-muted mb-1">@Model.Veiculo?.Marca @Model.Veiculo?.Modelo</p>
                                    <p class="text-muted mb-0">@Model.Veiculo?.Ano</p>
                                </div>
                            </div>

                            <!-- Mecânico -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0"><i class="fas fa-tools me-2"></i>Mecânico</h6>
                                </div>
                                <div class="card-body">
                                    <h6>@Model.Mecanico</h6>
                                </div>
                            </div>

                            <!-- Datas -->
                            <div class="card">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0"><i class="fas fa-calendar me-2"></i>Datas</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <small class="text-muted">Abertura:</small><br>
                                        <strong>@Model.DataAbertura.ToString("dd/MM/yyyy HH:mm")</strong>
                                    </div>
                                    @if (Model.DataInicio.HasValue)
                                    {
                                        <div class="mb-2">
                                            <small class="text-muted">Início:</small><br>
                                            <strong>@Model.DataInicio.Value.ToString("dd/MM/yyyy HH:mm")</strong>
                                        </div>
                                    }
                                    @if (Model.DataFinalizacao.HasValue)
                                    {
                                        <div class="mb-2">
                                            <small class="text-muted">Finalização:</small><br>
                                            <strong>@Model.DataFinalizacao.Value.ToString("dd/MM/yyyy HH:mm")</strong>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
